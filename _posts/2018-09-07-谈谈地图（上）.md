---
layout: post
title: 谈谈地图（上）
summary: 关键词：地图、资质、数据采集、图层、样式
featured-img: ruben-santander-69158
---
### 地图概念

如何理解「地图」？

百度百科的描述非常冗长，我个人比较喜欢的定义是：“地图是一种图形表现，它有助于对人类世界中的事物、概念、条件、过程或事件进行空间理解。”

这个定义强调了「地图」是空间理解的媒介。现实世界非常复杂，人类表达和理解的过程中，往往需要降纬和抽象。地图是将三维世界的地理信息降维到二维世界去理解。降纬过程中如何抽象，取决于这些地理元素在实际场景中如何使用。

「圆明园」准确讲是一个区域面（AOI），在现实世界有明确边界。但是，如果手机搜索圆明园并选择导航到这里，此时「圆明园」会被当作一个点（POI）来处理，因为只有一个点才有明确的经纬度坐标，也才能作为导航路线的终点。但如果搜索完没有发起导航，地图APP往往会高亮其边界，此时则是将其当作一个AOI来处理。

上述例子中提到的「导航」和「浏览图区」，也是地图使用上最核心的两类场景。在导航场景下，用户关注的是点与点间的路线，目的地如果是一个AOI面，此时往往会匹配成适配当前驾驶工具的POI点（基本是园区的出入口）。在浏览图区场景下，点与点间的路线不重要，AOI区域内部的信息显然会更重要。


### 测绘资质

一般把地图上的展示信息分为三类：POI、AOI、道路。其中，POI（Point of interest ）是「点」的概念，AOI（Area of interest）是「面」的概念，道路则是「线」的概念，这些数据都需要采集才可以得到。 

地理信息采集需要资质，这一点构成了这个行业最大的护城河。有地理信息采集资质的企业称为「图商」，像高德和四维图新就是老牌的图商。图商将自己采集好的数据加工清洗，向有需要但是没能力采集的企业售卖（主要是车企），这是早期电子地图的核心赢利模式。

早年间百度做手机地图时没有测绘资质，地图数据只能向四维图新购买，后来四维图新被腾讯投资，高德地图被阿里收购，百度无奈收购长地万方。15年-17年，是百度地图收购长地万方后的关键整合期，也正是这两年，高德地图市占开始反超百度。高德在产品上自然有一些妙手，比如林志玲语音包，但究其根本原因，还是地图数据质量的差异，这几乎决定了这款工具型产品的体验上限。

采集数据需要测绘资质，更新和展示数据也要经过政府审查，一些敏感的POI信息，比如监狱、精神病院、收留所，其实是不允许向公众展示的。地图APP会在软件内说明当前地图数据的审图号，这个审图号就是经过政府审查后的合规证明。

除了百度、腾讯、阿里外，华为，滴滴和美团也申请到了测绘资质。华为主要是其无人驾驶业务的需要，滴滴和美团虽然也有无人驾驶规划，但更多的还是数据安全的考量。

滴滴上每撮合一笔订单，都必然会伴随一次路线规划请求。如果路线规划通过第三方来实现，这也就意味着，需要向第三方暴露每一笔订单的起点、终点和行程轨迹，这几乎是平台内最核心的数据。

15年百度投资Uber中国后，滴滴由百度地图切换为腾讯地图，到19年，滴滴切换为自己的地图服务，美团也是相似的路径。百度、阿里、腾讯、滴滴、美团，互联网公司申请测绘资质的脚步不会停下，下一个可能是拼多多。


### 数据采集

与传统测绘相比，互联网地图的数据采集更聚焦于道路和POI，这是导航的核心依赖。数据采集的方法一般可分为四类：自采、众包、用户上报和渠道合作。

道路数据的采集主要依赖专业采集车，采集车无法行驶的道路，比如景区内部路或狭窄巷道，可以通过步采背包或无人机替代。一辆采集车上会装有多台摄像机和激光设备，行驶时能够实时获取道路的路牌、车道线、边缘线，同时也能拍摄道路两侧的街景。POI便可以从这些街景数据中利用OCR方法来提取。

相比于道路，POI信息的变更会更频繁。一家餐馆新开张试营业几个月后可能就倒闭了，如此短时间的数据变更，依赖街景数据是做不到的。另外，除POI自身外，POI附属信息也会频繁变更，典型的如节假日期间政府部门的办公时间，在国内，这几乎不可能通过规模化的方式采集到。

对于这些离散的、短时效的、个性化的采集需求，只能引入人工来定向解决。在自采车队外，图商一般还有大量的采集员在负责这些零散数据的更新，这同时也催生了地图众包业务的发展。百度地图和高德地图旗下都有众包采集的产品（名字还都叫淘金），产品逻辑基本都是平台发布任务，用户认领任务，任务完成后获取激励和报酬。

除自采和众包外，用户上报和渠道合作也是数据获取的来源。

用户上报面向C端，渠道合作面向B端和G端。C端直接上报的POI数据，一般置信度无法检验，会作为数据缺失情报而不是立即采用。但是对于部分道路突发事件，比如积水、车祸等，平台可以分析上报位置附近的用户轨迹，来辅助判断其是否置信，置信度高的数据是会被实时采用的。

而B端和G端的合作主要是商家、KA客户和各地方政府的交通主管部门。

麦当劳在中国有数千家门店，品牌方希望地图能准确展示其所有门店信息，以便线下获客。而地图作为平台方，也希望这种高热餐饮的POI能够实时准确，这样背景下，二者一般会进行资源置换合作。除B端外，还会有G端政府合作，主要是道路和实时路况的数据置换，部分城市还会开放实时公交数据。高德地图的贴吧里，常年有用户在问某某城市的实时公交什么时候上线，实质上这种服务完全依赖政府数据（爬虫有法务风险），不开放就做不了。

除了上述比较传统的采集方法，互联网公司一般还会采用爬虫和数据挖掘作为补充。

爬虫业务逻辑比较简单但需实时对抗，数据挖掘则会有相当多的挖掘策略。淘宝有国内最大的用户订单地址数据和物流信息，美团外卖有最大的餐饮商户的营业信息，这些数据的积累，对POI的更新维护有着非常大的帮助。除此之外，用户移动设备的活动轨迹、wifi连接信息，POI检索行为等等，也都会作为POI情报的挖掘数据源。


### 图层

地图数据在绘制和展示层面会分成不同的层次，称之为图层。

### 样式



注：本文于 2018-09-07 开始撰写，最后更新于 2021-05-17。

